<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
    <title>Exercise 1: Create a XAML-based calculator</title>
    <link rel="stylesheet" type="text/css" href="./res/styles/normalize.css">
    <link rel="stylesheet" type="text/css" href="./res/styles/prettify.css" />
    <link rel="stylesheet" type="text/css" href="./res/styles/styles.css">
</head>

<body>
    <!-- Use the same title as the StartHere -->
    <header>XAM130 XAML in Xamarin.Forms</header>

    <section id="main">
        <h2>Exercise 1: Create a XAML-based calculator</h2>
<p>This exercise will take an existing Xamarin.Forms application (a calculator app) and convert the user interface definition from C# to XAML.</p>
<p>You will start with an application that displays a calculator and allows you to perform simple calculations. In the starter solution, the UI is completely defined in C# as you have done up to this point. Our goal is to convert this UI into XAML. This is a standard Xamarin.Forms application with a Portable Class Library for the shared UI and logic, and platform-specific projects for iOS, Windows, and Android.</p>
<div class="row">
<div class="col-lg-4">
<img src="./images/calc-android.png" alt="Finished Android calculator" title="Calculator Android" />
</div>
<div class="col-lg-4">
<img src="./images/calc-ios.png" alt="Finished iOS calculator" title="Calculator iOS" />
</div>
<div class="col-lg-4">
<img src="./images/calc-wp8.png" alt="Finished Windows calculator" title="Calculator Windows" />
</div>
</div>
<blockquote class="info-quote">To complete the exercise, you will need <a href="https://www.visualstudio.com/" target="_blank">Visual Studio for Windows or macOS</a> with the <a href="https://visualstudio.microsoft.com/xamarin/" target="_blank">Xamarin development tools</a> installed. You will also need either an emulator/simulator or a device to run the exercise on. Please see the <a href="https://docs.microsoft.com/xamarin/cross-platform/get-started/installation/" target="_blank">setup page</a> if you need help installing the Xamarin development environment.
</blockquote>

<hr>
<h2>Add a new XAML ContentPage to the PCL</h2>
<p>We'll replace the existing code based MainPage with a new XAML version. </p>
<ol>
<li>
Start by opening the <strong>Exercise 1 &gt; Start</strong> Calculator project from your copy of the cloned or downloaded <a href="https://github.com/XamarinUniversity/XAM130/">course materials</a> and verify it builds and runs in your environment (any platform is fine).
</li>
<li>
Open the <code>MainPage.cs</code> file. This is the existing UI definition which is done in C# code.
</li>
</ol>
<ide name="xs">
<ol start="3">
<li>Let's rename this class first - so we can create a duplicate, but defined in XAML. <strong>Right-click</strong> on the <code>MainPage</code> class name and select <strong>Refactor &gt; Rename</strong>; or use <strong>Command+R</strong> while the cursor is on the class name. You can name it whatever you like, the lab assumes you have named it &quot;OldMainPage&quot;.</li>
</ol>
</ide>
<ide name="vs">
<ol start="3">
<li>Let's rename this class first - so we can create a duplicate, but defined in XAML. <strong>Right-click</strong> on the <code>MainPage</code> class name and select <strong>Rename</strong> (<strong>Refactor &gt; Rename</strong> on older Visual Studio versions); or use <kbd>Ctrl</kbd>+<kbd>R</kbd>,<kbd>R</kbd> while the cursor is on the class name. You can name it whatever you like, the lab assumes you have named it &quot;OldMainPage&quot;.</li>
</ol>
</ide>
<ol start="4">
<li>Compile the app and make sure it builds - you don't need to run it, just make sure nothing is broken before you continue.</li>
</ol>
<ide name="xs">
<ol start="5">
<li>
Next, let's add a new XAML page where we will put the new UI definition.
<ul>
<li>Add a new file to the PCL project.</li>
<li>Select the <strong>Forms &gt; Forms ContentPage Xaml</strong> template.</li>
<li>Name the new file <strong>MainPage</strong> as shown below.</li>
</ul>
</li>
</ol>
</ide>
<ide name="vs">
<ol start="5">
<li>
Next, let's add a new XAML page where we will put the new UI definition.
<ul>
<li>Add a new file to the PCL project.</li>
<li>Select the <strong>Visual C# &gt; Xamarin.Forms &gt; Content Page</strong> template. (Older Visual Studio versions may have this template named <strong>Forms ContentPage Xaml</strong>.)</li>
<li>Name the new file <strong>MainPage</strong> as shown below.</li>
</ul>
</li>
</ol>
</ide>
<ide name="xs">
<img src="./images/XS-NewItem.png" alt="New File" />
</ide>
<ide name="vs">
<img src="./images/vs-newitem.png" alt="New File" />
</ide>

<hr>
<h2>Add a grid</h2>
<p>Take a look at the images below as guidance for the grid we will create. We'll use a <code>Grid</code> to layout the required controls. </p>
<figure class="figure">
<img src="./images/UILayout.png" alt="Grid template" />
</figure>
<ol>
<li>Start by opening <strong>MainPage.xaml</strong>. This is the markup file which we will use to describe our UI.</li>
<li>Add a <code>Grid</code> as the first child tag in the <code>ContentPage</code>, if there is an existing <code>Label</code> just replace it with the <code>Grid</code>.</li>
</ol>
<blockquote>
<strong>Note:</strong> Depending on the version of the IDE you are using, it may have a tag named <code>ContentPage.Content</code> as the first child tag, or it might be a <code>Label</code>. As you will see a bit later, the default child property for the <code>ContentPage</code> is <code>Content</code>, which means you can just place the child right into the <code>ContentPage</code> and omit the <code>ContentPage.Content</code> value. The below code block has removed the tag, but it's ok to leave it in place - just make sure your <code>Grid</code> is in between the open and close tags.
</blockquote>
<ol start="3">
<li>Set the following properties on the <code>Grid</code></li>
</ol>
<table class="table table-striped">
<thead>
<tr>
	<th>Property</th>
	<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
	<td><code>Padding</code></td>
	<td><code>&quot;5,0&quot;</code></td>
</tr>
<tr>
	<td><code>RowSpacing</code></td>
	<td><code>&quot;1&quot;</code></td>
</tr>
<tr>
	<td><code>ColumnSpacing</code></td>
	<td><code>&quot;1&quot;</code></td>
</tr>
<tr>
	<td><code>BackgroundColor</code></td>
	<td><code>&quot;Black&quot;</code></td>
</tr>
</tbody>
</table>
<pre class="prettyprint-collapse"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ContentPage x:Class=&quot;Calculator.MainPage&quot;
    xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot; 
    xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;&gt;
    
    &lt;Grid Padding=&quot;5,0&quot; RowSpacing=&quot;1&quot; ColumnSpacing=&quot;1&quot; BackgroundColor=&quot;Black&quot;&gt;
    &lt;/Grid&gt;
&lt;/ContentPage&gt;
</code></pre>


<hr>
<h2>Customize the grid</h2>
<ul>
<li>Add <code>RowDefinition</code> and <code>ColumnDefinition</code> elements to create a 4x6 grid.</li>
<li>We want <strong>4 columns and 6 rows</strong>, with the <strong>first row being 2X the size of all the others</strong>.</li>
<li>All of the columns should be equally sized.</li>
</ul>
<p>Here's the first row and column definition to show you the syntax:</p>
<pre class="prettyprint"><code>&lt;Grid ...&gt;
   &lt;Grid.RowDefinitions&gt;
      &lt;RowDefinition Height=&quot;2*&quot; /&gt;
   &lt;/Grid.RowDefinitions&gt;

   &lt;Grid.ColumnDefinitions&gt;
      &lt;ColumnDefinition Width=&quot;*&quot; /&gt;
   &lt;/Grid.ColumnDefinitions&gt;
&lt;/Grid&gt;
</code></pre>

<pre class="prettyprint-collapse"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;ContentPage x:Class=&quot;Calculator.MainPage&quot;
            xmlns=&quot;http://xamarin.com/schemas/2014/forms&quot; 
            xmlns:x=&quot;http://schemas.microsoft.com/winfx/2009/xaml&quot;&gt;
    
    &lt;Grid Padding=&quot;5,0&quot; RowSpacing=&quot;1&quot; ColumnSpacing=&quot;1&quot; BackgroundColor=&quot;Black&quot;&gt;
       &lt;Grid.RowDefinitions&gt;
          &lt;RowDefinition Height=&quot;2*&quot; /&gt;
          &lt;RowDefinition Height=&quot;*&quot; /&gt;
          &lt;RowDefinition Height=&quot;*&quot; /&gt;
          &lt;RowDefinition Height=&quot;*&quot; /&gt;
          &lt;RowDefinition Height=&quot;*&quot; /&gt;
          &lt;RowDefinition Height=&quot;*&quot; /&gt;
       &lt;/Grid.RowDefinitions&gt;

       &lt;Grid.ColumnDefinitions&gt;
          &lt;ColumnDefinition Width=&quot;*&quot; /&gt;
          &lt;ColumnDefinition Width=&quot;*&quot; /&gt;
          &lt;ColumnDefinition Width=&quot;*&quot; /&gt;
          &lt;ColumnDefinition Width=&quot;*&quot; /&gt;
       &lt;/Grid.ColumnDefinitions&gt;
    &lt;/Grid&gt;

&lt;/ContentPage&gt;
</code></pre>


<hr>
<h2>Add a label</h2>
<ul>
<li>Add a <code>Label</code> into the first row; have it span all four columns by setting the <code>Grid.ColumnSpan</code> property, and set the following properties:</li>
</ul>
<table class="table table-striped">
<thead>
<tr>
	<th>Property</th>
	<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
	<td><code>Grid.Row</code> (optional, default is first row)</td>
	<td><code>&quot;0&quot;</code></td>
</tr>
<tr>
	<td><code>Grid.ColumnSpan</code></td>
	<td><code>&quot;4&quot;</code></td>
</tr>
<tr>
	<td><code>FontAttributes</code></td>
	<td><code>&quot;Bold&quot;</code></td>
</tr>
<tr>
	<td><code>FontSize</code></td>
	<td><code>&quot;48&quot;</code></td>
</tr>
<tr>
	<td><code>BackgroundColor</code></td>
	<td><code>&quot;Black&quot;</code></td>
</tr>
<tr>
	<td><code>Text</code></td>
	<td><code>&quot;0&quot;</code></td>
</tr>
<tr>
	<td><code>TextColor</code></td>
	<td><code>&quot;White&quot;</code></td>
</tr>
<tr>
	<td><code>HorizontalTextAlignment</code></td>
	<td><code>&quot;End&quot;</code></td>
</tr>
<tr>
	<td><code>VerticalTextAlignment</code></td>
	<td><code>&quot;Center&quot;</code></td>
</tr>
<tr>
	<td><code>LineBreakMode</code></td>
	<td><code>&quot;NoWrap&quot;</code></td>
</tr>
</tbody>
</table>
<br />
<pre class="prettyprint-collapse"><code>&lt;Label FontAttributes=&quot;Bold&quot; FontSize=&quot;48&quot; BackgroundColor=&quot;Black&quot; Text=&quot;0&quot;
              TextColor=&quot;White&quot; HorizontalTextAlignment=&quot;End&quot; VerticalTextAlignment=&quot;Center&quot;
              LineBreakMode=&quot;NoWrap&quot; Grid.ColumnSpan=&quot;4&quot; /&gt;
</code></pre>


<hr>
<h2>Add buttons</h2>
<ul>
<li>Add all of the buttons into the UI, placing them into each row and column of the <code>Grid</code> as appropriate. </li>
<li>Set the <code>BackgroundColor</code> and <code>TextColor</code> of each <code>Button</code> based on the screenshots shown earlier. </li>
<li>For each button set the <code>FontSize</code> to <code>&quot;36&quot;</code> and the <code>BorderRadius</code> to <code>&quot;0&quot;</code>.</li>
</ul>
<pre class="prettyprint-collapse"><code>&lt;Button Text=&quot;7&quot; Grid.Row=&quot;1&quot; Grid.Column=&quot;0&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;8&quot; Grid.Row=&quot;1&quot; Grid.Column=&quot;1&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;9&quot; Grid.Row=&quot;1&quot; Grid.Column=&quot;2&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;

&lt;Button Text=&quot;4&quot; Grid.Row=&quot;2&quot; Grid.Column=&quot;0&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;5&quot; Grid.Row=&quot;2&quot; Grid.Column=&quot;1&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;6&quot; Grid.Row=&quot;2&quot; Grid.Column=&quot;2&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;

&lt;Button Text=&quot;1&quot; Grid.Row=&quot;3&quot; Grid.Column=&quot;0&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;2&quot; Grid.Row=&quot;3&quot; Grid.Column=&quot;1&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;3&quot; Grid.Row=&quot;3&quot; Grid.Column=&quot;2&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;0&quot; Grid.Row=&quot;4&quot; Grid.Column=&quot;0&quot; Grid.ColumnSpan=&quot;3&quot;
       BackgroundColor=&quot;White&quot; TextColor=&quot;Black&quot;
       FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;

&lt;Button Text=&quot;/&quot; Grid.Row=&quot;1&quot; Grid.Column=&quot;3&quot;
        BackgroundColor=&quot;#FFA500&quot; TextColor=&quot;White&quot;
        FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;X&quot; Grid.Row=&quot;2&quot; Grid.Column=&quot;3&quot;
        BackgroundColor=&quot;#FFA500&quot; TextColor=&quot;White&quot;
        FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;-&quot; Grid.Row=&quot;3&quot; Grid.Column=&quot;3&quot;
        BackgroundColor=&quot;#FFA500&quot; TextColor=&quot;White&quot;
        FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
&lt;Button Text=&quot;+&quot; Grid.Row=&quot;4&quot; Grid.Column=&quot;3&quot;
        BackgroundColor=&quot;#FFA500&quot; TextColor=&quot;White&quot;
        FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;

&lt;Button Text=&quot;C&quot; Grid.Row=&quot;5&quot; Grid.Column=&quot;0&quot;
        BackgroundColor=&quot;#808080&quot; TextColor=&quot;White&quot;
        FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;

&lt;Button Text=&quot;=&quot; Grid.Row=&quot;5&quot; Grid.Column=&quot;1&quot; Grid.ColumnSpan=&quot;3&quot;
        BackgroundColor=&quot;#FFA500&quot; TextColor=&quot;White&quot;
        FontSize=&quot;36&quot; BorderRadius=&quot;0&quot; /&gt;
</code></pre>


<hr>
<h2>Display the XAML ContentPage</h2>
<ul>
<li>Open the <strong>App.cs</strong> in the Portable Class Library (PCL) project.</li>
<li>Instantiate a new instance of <code>MainPage</code> in the constructor and assign it to the <code>MainPage</code> property. This should replace the existing <code>OldMainPage</code> instantiation.</li>
<li><strong>Run the application</strong> and make sure it displays the calculator UI - it won't be functional yet since we've not wired up any behavior, but it should look identical to how we started.</li>
</ul>
<pre class="prettyprint-collapse"><code>public class App : Application
{
    public App()
    {
        <mark>MainPage = new MainPage();</mark>
    }
}
</code></pre>

<p class="spacing-top">
<button class="spacing-both btn btn-toggle btn-danger" type="button" data-toggle="collapse" data-toggle-show-text="I&#39;m getting a build error about ContentPageViewModel" data-toggle-hide-text="Close troubleshooting steps" aria-expanded="false" data-target="#T1114bad3fb4746c382f82c0381e943c6">I'm getting a build error about ContentPageViewModel</button>
<div class="collapse" id="T1114bad3fb4746c382f82c0381e943c6">
<div class="card card-block">
<p>
<p>If you are getting compile errors mentioning <strong>ContentPageViewModel</strong>. Open your <strong>MainPage.xaml.cs</strong> file and delete or comment out the line setting up the BindingContext.</p>
<pre class="prettyprint"><code>public MainPage()
{
    InitializeComponent();
    <mark>// BindingContext = new ContentPageViewModel();</mark>
}
</code></pre>

<p>The <code>ContentPage</code> template in some versions of Visual Studio generates with a backing view model, but there is a name mismatch between the view model class and the creation of the view model in the page constructor; this causes a compile error that you will have to fix before the build process can even begin the XAML compilation process.</p>
</p>
</div>
</div>
</p>

<hr>
<h2>Exercise summary</h2>
<strong>Congratulations!</strong> In this exercise, you have converted a code-based UI into a XAML-based UI.
<p>You can view the completed solution in the <strong>Exercise 1 &gt; Completed</strong> folder of your copy of the cloned or downloaded <a href="https://github.com/XamarinUniversity/XAM130/">course materials</a>.</p>


        <div class="align-right">
            <a href="../StartHere.html">Go Back</a>
        </div>

    </section>

    <script src="./res/js/jquery.min.js"></script>
    <script src="./res/js/jquery.imagemapster.min.js"></script>
    <script src="./res/js/imagemap.js"></script>
    <script src="./res/js/prettify.js"></script>
    <script src="./res/js/script.js"></script>

    <footer>Copyright (C) 2018 Xamarin Inc., Microsoft. All rights reserved.<br><a target="_blank" href="http://university.xamarin.com">Visit Xamarin University for more classes and content</a></footer>

</body>
</html>